define("tpl!audioRecordingInteraction/creator/tpl/propertiesForm",["handlebars"],function(t){return t.template(function(t,e,a,n,o){function i(){return"checked=\"checked\""}function r(){return"style=\"display:none\""}function s(){return" selected=\"selected\""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,t.helpers),o=o||{};var l,d,c,p="",h=a.helperMissing,u=this.escapeExpression,m=this;return p+="<div class=\"panel\">\r\n    <label for=\"response-identifier\" class=\"has-icon\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Response identifier",c):h.call(e,"__","Response identifier",c)))+"</label>\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content:first\" data-tooltip-theme=\"info\"></span>\r\n    <div class=\"tooltip-content\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\"_\") and contain only Letters, underscores, hyphens (\"-\"), period (\".\", a.k.a. full-stop), Digits, CombiningChars and Extenders.",c):h.call(e,"__","The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\"_\") and contain only Letters, underscores, hyphens (\"-\"), period (\".\", a.k.a. full-stop), Digits, CombiningChars and Extenders.",c)))+"</div>\r\n\r\n    <input id=\"response-identifier\"\r\n           type=\"text\"\r\n           name=\"identifier\"\r\n           value=\"",(d=a.identifier)?l=d.call(e,{hash:{},data:o}):(d=e&&e.identifier,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+"\"\r\n           placeholder=\"e.g. RESPONSE\"\r\n           data-validate=\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=",(d=a.serial)?l=d.call(e,{hash:{},data:o}):(d=e&&e.serial,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+");\">\r\n</div>\r\n\r\n<div class=\"panel\">\r\n    <label>\r\n        <input name=\"allowPlayback\" type=\"checkbox\" ",l=a.if.call(e,e&&e.allowPlayback,{hash:{},inverse:m.noop,fn:m.program(1,i,o),data:o}),(l||0===l)&&(p+=l),p+="/>\r\n        <span class=\"icon-checkbox\"></span> "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Allow playback",c):h.call(e,"__","Allow playback",c)))+"\r\n    </label>\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n    <span class=\"tooltip-content\">\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Give the possibility to the test taker to playback its own recording.",c):h.call(e,"__","Give the possibility to the test taker to playback its own recording.",c)))+"\r\n    </span>\r\n</div>\r\n\r\n<div class=\"panel\">\r\n    <label>\r\n        <input name=\"autoStart\" type=\"checkbox\" ",l=a.if.call(e,e&&e.autoStart,{hash:{},inverse:m.noop,fn:m.program(1,i,o),data:o}),(l||0===l)&&(p+=l),p+="/>\r\n        <span class=\"icon-checkbox\"></span> "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Auto start recording",c):h.call(e,"__","Auto start recording",c)))+"\r\n    </label>\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n    <span class=\"tooltip-content\">\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Recording starts automatically once test taker give microphone use authorisation.",c):h.call(e,"__","Recording starts automatically once test taker give microphone use authorisation.",c)))+"\r\n    </span>\r\n</div>\r\n\r\n<div data-role=\"delayOptions\" ",l=a.unless.call(e,e&&e.autoStart,{hash:{},inverse:m.noop,fn:m.program(3,r,o),data:o}),(l||0===l)&&(p+=l),p+=">\r\n    <div class=\"panel\">\r\n        <label for=\"delay-minutes\" class=\"spinner\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Min:",c):h.call(e,"__","Min:",c)))+"</label>\r\n        <input id=\"delay-minutes\" name=\"delayMinutes\" value=\"",(d=a.delayMinutes)?l=d.call(e,{hash:{},data:o}):(d=e&&e.delayMinutes,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+"\" data-increment=\"1\" data-min=\"0\" data-max=\"20\" type=\"text\" />\r\n        <label for=\"delay-seconds\" class=\"spinner\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Sec:",c):h.call(e,"__","Sec:",c)))+"</label>\r\n        <input id=\"delay-seconds\" name=\"delaySeconds\" value=\"",(d=a.delaySeconds)?l=d.call(e,{hash:{},data:o}):(d=e&&e.delaySeconds,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+"\" data-increment=\"15\" data-min=\"0\" data-max=\"45\" type=\"text\" />\r\n    </div>\r\n</div>\r\n\r\n<div class=\"panel\">\r\n    <label>\r\n        <input name=\"autoPlayback\" type=\"checkbox\" ",l=a.if.call(e,e&&e.autoPlayback,{hash:{},inverse:m.noop,fn:m.program(1,i,o),data:o}),(l||0===l)&&(p+=l),p+="/>\r\n        <span class=\"icon-checkbox\"></span> "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Auto playback recording",c):h.call(e,"__","Auto playback recording",c)))+"\r\n    </label>\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n    <span class=\"tooltip-content\">\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Recorded audio is automatically played back after recording stops. During playback, no user interaction is possible and all buttons are disabled.",c):h.call(e,"__","Recorded audio is automatically played back after recording stops. During playback, no user interaction is possible and all buttons are disabled.",c)))+"\r\n    </span>\r\n</div>\r\n\r\n<div class=\"panel\">\r\n    <label for=\"max-records\" class=\"spinner\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Max attempts:",c):h.call(e,"__","Max attempts:",c)))+"</label>\r\n    <input id=\"max-records\" name=\"maxRecords\" value=\"",(d=a.maxRecords)?l=d.call(e,{hash:{},data:o}):(d=e&&e.maxRecords,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+"\" class=\"large\" data-increment=\"1\" data-min=\"0\" type=\"text\" />\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n    <span class=\"tooltip-content\">\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Maximum number of recording attempts allowed to the test taker. Set to 0 to allow unlimited attempts. With a limit of 3, the test taker will be able to click 2 times on the reset button.",c):h.call(e,"__","Maximum number of recording attempts allowed to the test taker. Set to 0 to allow unlimited attempts. With a limit of 3, the test taker will be able to click 2 times on the reset button.",c)))+"\r\n    </span>\r\n</div>\r\n\r\n<div class=\"panel\">\r\n    <label for=\"max-recording-time\" class=\"spinner\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Time limit:",c):h.call(e,"__","Time limit:",c)))+"</label>\r\n    <input id=\"max-recording-time\" name=\"maxRecordingTime\" value=\"",(d=a.maxRecordingTime)?l=d.call(e,{hash:{},data:o}):(d=e&&e.maxRecordingTime,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+"\" class=\"large\" data-increment=\"5\" data-min=\"5\" data-max=\"",(d=a.maximumRecordingTimeLimit)?l=d.call(e,{hash:{},data:o}):(d=e&&e.maximumRecordingTimeLimit,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+"\" type=\"text\" />\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n    <span class=\"tooltip-content\">\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"In seconds. Maximum recording time allowed (cannot be less than 5 seconds). Recording will automatically stop once reached.",c):h.call(e,"__","In seconds. Maximum recording time allowed (cannot be less than 5 seconds). Recording will automatically stop once reached.",c)))+"\r\n    </span>\r\n</div>\r\n\r\n<hr />\r\n<div class=\"panel\">\r\n    <label for=\"is-compressed\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Recording format",c):h.call(e,"__","Recording format",c)))+"</label>\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n    <span class=\"tooltip-content\">\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"With compressed recording, the audio is saved as a webm or ogg file (smaller size). With uncompressed, as a lossless Wav file (much bigger size).",c):h.call(e,"__","With compressed recording, the audio is saved as a webm or ogg file (smaller size). With uncompressed, as a lossless Wav file (much bigger size).",c)))+"\r\n    </span>\r\n    <select id=\"is-compressed\" name=\"isCompressed\">\r\n        <option value=\"true\"",l=a.if.call(e,e&&e.isCompressed,{hash:{},inverse:m.noop,fn:m.program(5,s,o),data:o}),(l||0===l)&&(p+=l),p+=">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Compressed",c):h.call(e,"__","Compressed",c)))+"</option>\r\n        <option value=\"false\"",l=a.unless.call(e,e&&e.isCompressed,{hash:{},inverse:m.noop,fn:m.program(5,s,o),data:o}),(l||0===l)&&(p+=l),p+=">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Uncompressed",c):h.call(e,"__","Uncompressed",c)))+"</option>\r\n    </select>\r\n</div>\r\n\r\n<div data-role=\"compressedOptions\" ",l=a.unless.call(e,e&&e.isCompressed,{hash:{},inverse:m.noop,fn:m.program(3,r,o),data:o}),(l||0===l)&&(p+=l),p+=">\r\n    <div class=\"panel\">\r\n        <label for=\"audio-bitrate\" class=\"spinner\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Audio bitrate:",c):h.call(e,"__","Audio bitrate:",c)))+"</label>\r\n        <input id=\"audio-bitrate\" name=\"audioBitrate\" value=\"",(d=a.audioBitrate)?l=d.call(e,{hash:{},data:o}):(d=e&&e.audioBitrate,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+"\" class=\"large\" data-increment=\"1000\" data-min=\"8000\" type=\"text\" />\r\n        <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n        <span class=\"tooltip-content\">\r\n            "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"In bps (bits per second). Set the tradeoff between audio quality and filesize. With the default value (20.000bps), a 2minutes recording weights roughly 300KB.",c):h.call(e,"__","In bps (bits per second). Set the tradeoff between audio quality and filesize. With the default value (20.000bps), a 2minutes recording weights roughly 300KB.",c)))+"\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n<div data-role=\"uncompressedOptions\"  ",l=a.if.call(e,e&&e.isCompressed,{hash:{},inverse:m.noop,fn:m.program(3,r,o),data:o}),(l||0===l)&&(p+=l),p+=">\r\n    <div class=\"panel\">\r\n        <label for=\"is-stereo\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Channels",c):h.call(e,"__","Channels",c)))+"</label>\r\n        <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n        <span class=\"tooltip-content\">\r\n            "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Number of channels for the recording. Allow to cut the record size in half if used in mono.",c):h.call(e,"__","Number of channels for the recording. Allow to cut the record size in half if used in mono.",c)))+"\r\n        </span>\r\n        <select id=\"is-stereo\" name=\"isStereo\">\r\n            <option value=\"false\"",l=a.unless.call(e,e&&e.isStereo,{hash:{},inverse:m.noop,fn:m.program(5,s,o),data:o}),(l||0===l)&&(p+=l),p+=">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Mono",c):h.call(e,"__","Mono",c)))+"</option>\r\n            <option value=\"true\"",l=a.if.call(e,e&&e.isStereo,{hash:{},inverse:m.noop,fn:m.program(5,s,o),data:o}),(l||0===l)&&(p+=l),p+=">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Stereo",c):h.call(e,"__","Stereo",c)))+"</option>\r\n        </select>\r\n    </div>\r\n</div>\r\n\r\n<hr />\r\n\r\n<h3 class=\"txt-error\"><strong><span class=\"icon-warning\"></span> "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"For tests only",c):h.call(e,"__","For tests only",c)))+"</strong></h3>\r\n\r\n<div class=\"panel\">\r\n    <label>\r\n        <input name=\"displayDownloadLink\" type=\"checkbox\" ",l=a.if.call(e,e&&e.displayDownloadLink,{hash:{},inverse:m.noop,fn:m.program(1,i,o),data:o}),(l||0===l)&&(p+=l),p+="/>\r\n        <span class=\"icon-checkbox\"></span>\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Allow download",c):h.call(e,"__","Allow download",c)))+"\r\n    </label>\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n    <span class=\"tooltip-content\">\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"This is for testing purposes only. Displays a link to download the recorded file once the recording stops. This shouldn't be used in a delivery context, as it would allow the test taker to download its own recording.",c):h.call(e,"__","This is for testing purposes only. Displays a link to download the recorded file once the recording stops. This shouldn't be used in a delivery context, as it would allow the test taker to download its own recording.",c)))+"\r\n    </span>\r\n</div>\r\n\r\n<div class=\"panel\">\r\n    <label for=\"partial-update-interval\" class=\"spinner\">"+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"Update interval:",c):h.call(e,"__","Update interval:",c)))+"</label>\r\n    <input id=\"partial-update-interval\" name=\"partialUpdateInterval\" value=\"",(d=a.partialUpdateInterval)?l=d.call(e,{hash:{},data:o}):(d=e&&e.partialUpdateInterval,l="function"==typeof d?d.call(e,{hash:{},data:o}):d),p+=u(l)+"\" class=\"large\" data-increment=\"1\" data-min=\"1\" data-max=\"60\" type=\"text\" />\r\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\r\n    <span class=\"tooltip-content\">\r\n        "+u((d=a.__||e&&e.__,c={hash:{},data:o},d?d.call(e,"In seconds. The time interval between partial updates of the recording.",c):h.call(e,"__","In seconds. The time interval between partial updates of the recording.",c)))+"\r\n    </span>\r\n</div>"})}),define("audioRecordingInteraction/creator/widget/states/Question",["lodash","i18n","jquery","module","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/pciMediaManager/pciMediaManager","taoQtiItem/qtiCreator/editor/simpleContentEditableElement","tpl!audioRecordingInteraction/creator/tpl/propertiesForm","util/typeCaster"],function(t,e,a,n,o,i,r,s,l,d,c){"use strict";function p(t,e,a){t.prop(a,e),t.triggerPci("configChange",[t.getProperties()])}var h=o.extend(i,function(){},function(){var t=this.widget.$container;l.destroy(t)});return h.prototype.initForm=function(){var e,a,o,i=this.widget,l=i.$form,h=i.element,u=h.getResponseDeclaration(),m=s(i);l.html(d(t.defaults({},n.config(),{serial:u.serial,identifier:h.attr("responseIdentifier"),allowPlayback:c.strToBool(h.prop("allowPlayback"),!0),autoStart:c.strToBool(h.prop("autoStart"),!1),autoPlayback:c.strToBool(h.prop("autoPlayback"),!1),delayMinutes:h.prop("delayMinutes"),delaySeconds:h.prop("delaySeconds"),maxRecords:h.prop("maxRecords"),maxRecordingTime:h.prop("maxRecordingTime"),isCompressed:c.strToBool(h.prop("isCompressed"),!0),audioBitrate:h.prop("audioBitrate"),isStereo:c.strToBool(h.prop("isStereo"),!1),updateResponsePartially:c.strToBool(h.prop("updateResponsePartially"),!0),partialUpdateInterval:parseInt(h.prop("partialUpdateInterval"),10)/1e3,displayDownloadLink:c.strToBool(h.prop("displayDownloadLink"),!1)}))),e=l.find("[data-role=\"compressedOptions\"]"),a=l.find("[data-role=\"uncompressedOptions\"]"),o=l.find("[data-role=\"delayOptions\"]"),r.initWidget(l),r.setChangeCallbacks(l,h,t.assign({identifier:function(t,e){u.id(e),h.attr("responseIdentifier",e)},allowPlayback:p,autoStart:function(t,e,a){e?o.show():o.hide(),p(t,e,a)},autoPlayback:p,delayMinutes:p,delaySeconds:p,maxRecords:p,maxRecordingTime:p,isCompressed:function(t,n,o){"true"===n?(a.hide(),e.show()):(a.show(),e.hide()),p(t,n,o)},audioBitrate:p,isStereo:p,partialUpdateInterval:function(t,e,a){e=1e3*parseFloat(e),p(t,e,a)},displayDownloadLink:p},m.getChangeCallbacks())),m.init()},h}),define("audioRecordingInteraction/creator/widget/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states","audioRecordingInteraction/creator/widget/states/Question"],function(t,e){"use strict";return t.createBundle(e,arguments,["answer","correct","map"])}),define("css!audioRecordingInteraction/creator/css/audioRecordingInteraction",[],function(){}),define("audioRecordingInteraction/creator/widget/Widget",["taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget","audioRecordingInteraction/creator/widget/states/states","css!audioRecordingInteraction/creator/css/audioRecordingInteraction"],function(t,e){"use strict";var a=t.clone();return a.initCreator=function(){var a;this.registerStates(e),t.initCreator.call(this),a=this.$container.find(".audioRecordingInteraction"),a.length&&a.addClass("tao-qti-creator-context")},a}),define("tpl!audioRecordingInteraction/creator/tpl/markup",["handlebars"],function(t){return t.template(function(t,e,a,n,o){return this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,t.helpers),o=o||{},"<div class=\"audioRecordingInteraction\">\r\n    <div class=\"audio-rec\">\r\n        <div class=\"input-meter\">\r\n            <div class=\"countdown-pie-chart\"> </div>\r\n            <div class=\"leds\"> </div>\r\n            <div class=\"mic\"> </div>\r\n        </div>\r\n        <div class=\"progress\"> </div>\r\n        <div class=\"controls\"> </div>\r\n    </div>\r\n</div>"})}),define("audioRecordingInteraction/imsPciCreator",["lodash","taoQtiItem/qtiCreator/editor/customInteractionRegistry","audioRecordingInteraction/creator/widget/Widget","tpl!audioRecordingInteraction/creator/tpl/markup"],function(t,e,a,n){"use strict";var o={getTypeIdentifier:function(){return"audioRecordingInteraction"},getWidget:function(){var e;return a.beforeStateInit(function(a,n){n.typeIdentifier&&"audioRecordingInteraction"===n.typeIdentifier&&(e=o.getDefaultProperties(),t.forEach(e,function(t,e){void 0!==n.properties[e]&&("string"!=typeof n.properties[e]||n.properties[e]||"string"==typeof t)||(n.properties[e]=t)}))}),a},getDefaultProperties:function(){return{isReviewMode:!1,allowPlayback:!0,autoStart:!1,autoPlayback:!1,delayMinutes:0,delaySeconds:0,maxRecords:2,maxRecordingTime:120,isCompressed:!0,audioBitrate:2e4,isStereo:!1,media:{autostart:!0,replayTimeout:5,maxPlays:2},displayDownloadLink:!1,updateResponsePartially:!0,partialUpdateInterval:1e3}},afterCreate:function(){},getMarkupTemplate:function(){return n},getMarkupData:function(t,e){return e}};return o}),function(t){var e=document,o=e.createElement("style");o.type="text/css",e.getElementsByTagName("head")[0].appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t))}(".item-editor-interaction-related div[data-role=\"delayOptions\"] .panel{margin-top:-15px}.item-editor-interaction-related div[data-role=\"delayOptions\"] .panel label[for=\"delayMinutes\"]{min-width:0}.item-editor-interaction-related div[data-role=\"delayOptions\"] .panel label[for=\"delaySeconds\"]{min-width:0;padding-left:18px}\r\n\r\n/*# sourceMappingURL=audioRecordingInteraction.css.map */"),define(["audioRecordingInteraction/imsPciCreator"],function(t){return t});